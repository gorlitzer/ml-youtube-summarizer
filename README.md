# YouTube Channel Subscription Newsletter API

## Disclaimer: This is a **WIP**.

This Python API provides a summary of the latest videos from a specified YouTube channel. It integrates several tools to fetch video data, extract transcripts, and summarize the content using OpenAI's language models.

## Features

- Fetch the latest videos from a specified YouTube channel in a timeframe.
- Get detailed summaries of the video content.
- Easy integration with OpenAI’s GPT models for generating summaries.
- Return video summaries in both JSON and HTML formats.
- Serve an HTML page with a form to request summaries.

## Project Structure

```bash
ml-youtube-summarizer/
│
├── main.py
├── summarizer.py
├── youtube_utils.py
├── templates
│   ├── index.html
│   └── summary.html
├── static
│   ├── style.css
│   └── script.js
├── .env
├── requirements.txt
└── .envrc
```

- **`.envrc`**: Configuration file for `direnv` to set up the virtual environment and install dependencies.
- **`.env`**: Environment variables configuration file.
- **`main.py`**: FastAPI application and endpoint definition.
- **`youtube_utils.py`**: Contains functions for interacting with the YouTube API.
- **`summarizer.py`**: Contains functions for summarizing video transcripts.
- **`templates/`**: Contains HTML templates for serving the UI and summary results.
  - **`index.html`**: The HTML form for requesting video summaries.
  - **`summary.html`**: The HTML template for displaying the summary.
- **`static/`**: Contains static files like CSS and JS.
- **`requirements.txt`**: Lists Python dependencies.
- **`README.md`**: This file.

## Endpoints

### Home Page

**`GET /`**

Serves the HTML form for input. This page allows users to specify the YouTube channel ID and the timeframe to look back for new videos.

### Summary in JSON

**`GET /api/summarize-videos/`**

Returns a summary of the latest videos from a specified YouTube channel in JSON format.

**Query Parameters:**

- `channel_id` (str): The ID of the YouTube channel.
- `timeframe_hours` (int): The number of hours to look back for new videos (default: 24).

**Response:**

```json
{
  "summary": "Combined summary of the latest videos in Markdown format."
}
```

### Summary in HTML

**`GET /summarize-videos/`**

Returns an HTML page displaying the summary of the latest videos from a specified YouTube channel. This page is generated based on the data processed by the API.

**Query Parameters:**

- `channel_id` (str): The ID of the YouTube channel.
- `timeframe_hours` (int): The number of hours to look back for new videos (default: 24).

**Response:**
An HTML page displaying the summary in a readable format.

## Environment Variables

Create a `.env` file in the root directory of the project with the following content:

```bash
YOUTUBE_API_KEY=your_youtube_api_key
OPENAI_API_KEY=your_openai_api_key
CHANNEL_ID=your_channel_id
TIMEFRAME_HOURS=24
```

## Installation and Setup

1. **Clone the repository**:

   ```bash
   git clone https://github.com/yourusername/ml-youtube-summarizer.git
   cd ml-youtube-summarizer
   ```

2. **Set up the virtual environment and install dependencies**:

   ```bash
   direnv allow
   ```

3. **Create and configure the `.env` file**:

   ```bash
   touch .env
   # Edit .env with your API keys and other configurations
   ```

4. **Run the FastAPI application**:

   ```bash
   uvicorn main:app --reload
   ```

5. **Access the application**:
   - Visit `http://localhost:8000` to view the home page and request video summaries.
   - Access `http://localhost:8000/api/summarize-videos/` for JSON responses.

## Notes

- Ensure that you have valid API keys for YouTube and OpenAI in your `.env` file.
- Static files such as CSS and JavaScript can be added to the `static` directory and referenced in your HTML templates.
- The application is currently a work in progress, and features may be updated or expanded over time.
- README generated by GPT_3.5.

## License

This project is licensed under the MIT License.
